{
  "comments": [
    {
      "key": {
        "uuid": "9eebf8d2_b097cbe2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000177
      },
      "writtenOn": "2019-10-14T07:14:44Z",
      "side": 1,
      "message": "To avoid confusion, say \"build verification\" and Java file format validation. I have misunderstood the subject as format check for Bazel (build) and Java files. It turned out, Bazel format validation is not involved here.",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89a3dc54_7305ff32",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2019-10-14T09:58:17Z",
      "side": 1,
      "message": "\u003e To avoid confusion, say \"build verification\" and Java file format validation. I have misunderstood the subject as format check for Bazel (build) and Java files. It turned out, Bazel format validation is not involved here.\n\nYes, exactly. I would have chosen a Bazel build instead of of Maven, if you know a simple way to publish to Maven Central from Bazel without having Maven in the first place :-)",
      "parentUuid": "9eebf8d2_b097cbe2",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c98f88_2ead1807",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000177
      },
      "writtenOn": "2019-10-17T06:59:05Z",
      "side": 1,
      "message": "Well, we could do something similar what gerrit and gitiles project do. Gitiles project is more interesting, as it\u0027s using Bazlets infrastructure, see: [1].\n\nMoreover, there was a discussion on bazel mailing list about that topic: [1]. And I also got private message from another build engineer, with this content:\n\n\"\nWe do something similar. We publish, at last count, 410 artifacts to an internal Nexus repo. We use a custom rule to generate pom.xml (although you could use rules_jvm_external and bazel-common\u0027s pom-file as shown here[0]) and then have an install/publish script that finds all of our poms in `bazel-bin` and stuffs them as modules into a templated \"super pom\". We then run `mvn -f $SUPER_POM [install|deploy] on this \"super pom\". In our testing, maven was faster at uploading several hundred artifacts than what we could achieve using the nexus rest api or invoking individual maven processes in parallel, thus the \"super pom\" complication. This all takes about 30s of wall clock time.\n\"\n\nBottom line: we have a number of options here, to get rid of Maven altogether. And we should seize them.\n\n* [0] https://github.com/bazelbuild/rules_jvm_external/tree/master/examples/pom_file_generation)\n* [1] https://gerrit.googlesource.com/gitiles/+/refs/heads/master/tools/maven/BUILD\n* [2] https://groups.google.com/d/topic/bazel-discuss/65b2pphtCdM/discussion",
      "parentUuid": "89a3dc54_7305ff32",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95432841_9a9640f3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000177
      },
      "writtenOn": "2019-10-17T07:09:43Z",
      "side": 1,
      "message": "Here is documentation how to release to Google storage Bucket: [1], but releasing to Maven Central should be fairly similar.\n\n* [1] https://gerrit.googlesource.com/gitiles/+/refs/heads/master/Documentation/developer-guide.md#Releases",
      "parentUuid": "89c98f88_2ead1807",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "437ccbac_f0575806",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2019-10-17T09:15:50Z",
      "side": 1,
      "message": "\u003e Here is documentation how to release to Google storage Bucket: [1], but releasing to Maven Central should be fairly similar.\n\u003e \n\u003e * [1] https://gerrit.googlesource.com/gitiles/+/refs/heads/master/Documentation/developer-guide.md#Releases\n\nAFAIK, [1] uses Maven anyway.",
      "parentUuid": "95432841_9a9640f3",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91166d01_01992e47",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000177
      },
      "writtenOn": "2019-10-17T09:39:26Z",
      "side": 1,
      "message": "\u003e AFAIK, [1] uses Maven anyway.\n\nTrue, but in: [1] mvn only used to install|deploy final artifact (as interface to Maven Central or other repositories, like Google Storage Bucket), while right now, you are using mvn to build/test your sources.",
      "parentUuid": "437ccbac_f0575806",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58b6d44d_719a36c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2019-10-17T09:44:17Z",
      "side": 1,
      "message": "\u003e \u003e AFAIK, [1] uses Maven anyway.\n\u003e \n\u003e True, but in: [1] mvn only used to install|deploy final artifact (as interface to Maven Central or other repositories, like Google Storage Bucket), while right now, you are using mvn to build/test your sources.\n\nThis library contains only one interface: I wanted only to publish to Maven Central, that the purpose. Bazel doesn\u0027t help with the purpose of this library, however, I\u0027m fully sold for using it everywhere else.",
      "parentUuid": "91166d01_01992e47",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9695556a_5f437630",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000177
      },
      "writtenOn": "2019-10-17T10:11:24Z",
      "side": 1,
      "message": "\u003e Bazel doesn\u0027t help with the purpose of this library, however, I\u0027m fully sold for using it everywhere else.\n\nBut then it\u0027s something to be improved in Bazel, right? And we could contribute to it, because that\u0027s how open source works.\n\nIn Buck it was possible to assign maven_coordinates to a java rule,\nbuild it and just say:\n\n  buck publish :foo\n\nand then it just worked and deployed to Maven Central, and that what great: [3].\n\nBazel is still missing that feature, unfortuantely. The corresponding feature request is here: [4]. It seems, that some other projects have found the workaround, and we could investiagte their approach: [5].\n\n[3] https://buck.build/command/publish.html\n[4] https://github.com/bazelbuild/bazel/issues/1372\n[5] https://github.com/graknlabs/bazel-distribution",
      "parentUuid": "58b6d44d_719a36c4",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2953f7ff_64900e58",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2019-10-17T10:16:14Z",
      "side": 1,
      "message": "\u003e \u003e Bazel doesn\u0027t help with the purpose of this library, however, I\u0027m fully sold for using it everywhere else.\n\u003e \n\u003e But then it\u0027s something to be improved in Bazel, right? And we could contribute to it, because that\u0027s how open source works.\n\nHoly words :-)\n\nLooking forward to the Summit and get some \"Bazel crash-course\" :-)\nI went to a meetup in London that was supposed to be Bazel-centric, but then actually there were many other build systems and was very theoretical.\n\nBazelCon also is just 1 week after our Gerrit User Summit, I am so sorry we did not manage to do a unique conference for both :-(",
      "parentUuid": "9695556a_5f437630",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 12
      },
      "revId": "9d9bdcee831f843b2be2153dd2ba8fa5dfc0c1a8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}