{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a0badd7c_0c46002b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-01-20T23:44:05Z",
      "side": 1,
      "message": "@Marcin can you double-check?",
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01670df2_9f54c042",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2021-01-21T08:34:14Z",
      "side": 1,
      "message": "As discussed in the parent change, this chain could do with a follow up introducing proper documentation on how to use and configure this library.\n\nThis new setting should also be documented there.\n\nAt least some of this documentation can be ported from the multi-site plugin[1]\n\n[1]https://gerrit.googlesource.com/plugins/multi-site/+/refs/heads/master/src/main/resources/Documentation/config.md",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c3d78d26_fbd1fe36",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T08:43:11Z",
      "side": 1,
      "message": "Same as in follow up change, we decided that only plugins expose the documentation:\nhttps://review.gerrithub.io/c/GerritForge/global-refdb/+/503713/1..2/src/main/resources/Documentation/config.md",
      "parentUuid": "01670df2_9f54c042",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbae9258_ef582f95",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2021-01-21T08:50:19Z",
      "side": 1,
      "message": "I personally think documentation would be useful, otherwise the only way to know how to configure the library would be to look at the source code itself.",
      "parentUuid": "c3d78d26_fbd1fe36",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e92213cc_9571d0c0",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T08:53:52Z",
      "side": 1,
      "message": "or to the plugin which is using that library. Library will never be setup separately it\u0027s always a part of some plugin",
      "parentUuid": "cbae9258_ef582f95",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5a9bbd1_b023269f",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-01-21T08:59:18Z",
      "side": 1,
      "message": "Libraries should have an overview on how to use it and JavaDoc on the public classes and methods:\nhttps://bugs.chromium.org/p/gerrit/issues/detail?id\u003d13978\n\nBut yes, it\u0027s a separate change I believe.",
      "parentUuid": "cbae9258_ef582f95",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "275c0dc9_f9cf3774",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 76,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T15:03:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b5a9bbd1_b023269f",
      "range": {
        "startLine": 76,
        "startChar": 4,
        "endLine": 76,
        "endChar": 60
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6eaffa6d_1aadffde",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 85,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2021-01-21T08:38:59Z",
      "side": 1,
      "message": "I am thinking whether this configuration actually needed.\nWhat\u0027s the use-case for overriding \"metricsRoot\" with something other than the plugin name?\n\nWouldn\u0027t multi-site always prefix metrics as \"multi-site/\", high-availability with \"high-availability/\" and so on?",
      "range": {
        "startLine": 84,
        "startChar": 6,
        "endLine": 85,
        "endChar": 97
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9233c170_8767a7ea",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 85,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-01-21T08:59:18Z",
      "side": 1,
      "message": "\u003e I am thinking whether this configuration actually needed.\n\u003e What\u0027s the use-case for overriding \"metricsRoot\" with something other than the plugin name?\n\nGood point. @Marcin do you foresee any other use-cases?\n\n\u003e Wouldn\u0027t multi-site always prefix metrics as \"multi-site/\", high-availability with \"high-availability/\" and so on?\n\nYep.",
      "parentUuid": "6eaffa6d_1aadffde",
      "range": {
        "startLine": 84,
        "startChar": 6,
        "endLine": 85,
        "endChar": 97
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8cc340b_6498c5dd",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 85,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T09:02:51Z",
      "side": 1,
      "message": "For example if you have ha plugin and multi-site and you want to have a single metric. In this case for both HA and multi-site we can put something like \u0027global-refdb\u0027. Without that we will always have separate metrics.",
      "parentUuid": "9233c170_8767a7ea",
      "range": {
        "startLine": 84,
        "startChar": 6,
        "endLine": 85,
        "endChar": 97
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3d40651_2b8f5e74",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 85,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T09:13:57Z",
      "side": 1,
      "message": "let\u0027s discuss that in one place, we have the same discussion here: \n\nhttps://gerrit-review.googlesource.com/c/plugins/multi-site/+/294242/2/src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java#144",
      "parentUuid": "d8cc340b_6498c5dd",
      "range": {
        "startLine": 84,
        "startChar": 6,
        "endLine": 85,
        "endChar": 97
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96f50fde_05e14471",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/SharedRefDbConfiguration.java",
        "patchSetId": 5
      },
      "lineNbr": 85,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2021-01-21T09:35:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a3d40651_2b8f5e74",
      "range": {
        "startLine": 84,
        "startChar": 6,
        "endLine": 85,
        "endChar": 97
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c94ea9a_366c3de9",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/ValidationMetrics.java",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1015244
      },
      "writtenOn": "2021-01-21T10:49:54Z",
      "side": 1,
      "message": "I think this will fail if we allow multiple plugins to expose the metrics with the same root prefix, because it will try to register two metrics with the same name.",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 39,
        "endChar": 55
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82c35af4_edb70a7a",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/ValidationMetrics.java",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-01-21T14:04:09Z",
      "side": 1,
      "message": "Exactly, BUT if we have the plugin name as prefix, it *will never* fail because Gerrit would refuse two plugins with the same name.\n\nDoes that make sense?",
      "parentUuid": "0c94ea9a_366c3de9",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 39,
        "endChar": 55
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0fb7d47_cf1d8438",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/ValidationMetrics.java",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T14:05:34Z",
      "side": 1,
      "message": "Yes but the point is, do we allow to override that from config or we want to \"hardcode\" it to the plugin name?",
      "parentUuid": "82c35af4_edb70a7a",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 39,
        "endChar": 55
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "808da995_6fa6a7c0",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/ValidationMetrics.java",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1005270
      },
      "writtenOn": "2021-01-21T14:08:02Z",
      "side": 1,
      "message": "Ok looks like config param is controversial let me remove it",
      "parentUuid": "a0fb7d47_cf1d8438",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 39,
        "endChar": 55
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "676f6f63_e83247ee",
        "filename": "src/main/java/com/gerritforge/gerrit/globalrefdb/validation/ValidationMetrics.java",
        "patchSetId": 5
      },
      "lineNbr": 39,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-01-21T14:11:21Z",
      "side": 1,
      "message": "Thanks @Marcin for your patience on this :-)",
      "parentUuid": "808da995_6fa6a7c0",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 39,
        "endChar": 55
      },
      "revId": "4baa0c440ad4457ec8159227815282e8f0adf87e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}